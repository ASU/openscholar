<?php
// $Id$

/**
 * @file
 * Customizations for Gary King's website.
 */

/**
 * Implements hook_init().
 */
function gkplus_init() {
  drupal_add_library('system', 'ui.tabs');
}

/**
 * Implements hook_menu().
 */
function gkplus_menu() {
  $items = array();

  $items['research-group'] = array(
    'title' => 'Research Group',
    'page callback' => 'gkplus_people_page',
    'access arguments' => array('access content'),
    'file' => 'gkplus.pages.inc',
    'type' => MENU_CALLBACK,
  );

  return $items;
}

/**
 * Implements hook_menu_alter().
 */
function gkplus_menu_alter(&$items) {
  if (!_gkplus_check_purl()) {
    return;
  }

  if (!isset($items['people'])) {
    return;
  }
  $items_extra = gkplus_menu();
  $items['people'] = $items_extra['research-group'];
}

/**
 * Returns TRUE if the purl of the active vsite is "gkplus".
 */
function _gkplus_check_purl($purl = 'gking') {
  $vsite = vsite_get_vsite();
  return ($vsite && $vsite->group->purl == $purl);
}
