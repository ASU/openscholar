<?php

include_once('vsite_widgets.features.inc');

/**
 * hook block
 */
function vsite_widgets_block($op = 'list', $delta = 0, $edit = array()) {
  if ($op == 'list') {

    $blocks[6]['info'] = t('rss');
    return $blocks;
  }
  elseif ($op == 'view') {
    switch ($delta) {
      case 6:
      	return vsite_widget_rss();
    }
  }
}

/**
 * RSS block
 */
function vsite_widget_rss(){
  if (! $vsite = vsite_get_vsite()) {
    return;
  }

  if ($image = theme('image', 'misc/feed.png', t('Syndicate content'), 'RSS')) {
    $block['content'] = l($image, 'feed', array('html' => TRUE, 'attributes' => array('class' => 'feed-icon')));
  }

  return $block;

}


function vsite_widgets_vsite_widgets(){

	return array(

   'vsite_widgets-6' => array(
      'module' => 'vsite_widgets',
      'delta' => '6',
      'weight' => -5,
      'region' => false,
      'label' => 'RSS feed',
      'cache' => BLOCK_CACHE_CONTENT_CACHE,
      'cache_keys' => array(
        'os_og' => array('current' => 'current'),
      ),
    ),

  );

}
