diff --git a/media_gallery.addimage.js b/media_gallery.addimage.js
index 4ea119a..066e63b 100644
--- a/media_gallery.addimage.js
+++ b/media_gallery.addimage.js
@@ -3,13 +3,18 @@
 Drupal.behaviors.media_gallery = {};
 Drupal.behaviors.media_gallery.attach = function (context, settings) {
   // Bind a click handler to the 'add media' link.
-  $('a.media-gallery-add.launcher').once('media-gallery-add-processed').bind('click', Drupal.media_gallery.open_browser);
+  $('a.media-gallery-add.launcher').once('media-gallery-add').bind('click', Drupal.media_gallery.open_browser);
 };
 
 Drupal.media_gallery = {};
 
 Drupal.media_gallery.open_browser = function (event) {
   event.preventDefault();
+  event.stopPropagation();
+  
+  // get node id for the link that was clicked and save to settings (id attribute for parent article is node-[id])
+  Drupal.settings.mediaGalleryNodeNid = $(this).closest("article.contextual-links-region").attr('id').substring(5);
+
   var pluginOptions = { 'id': 'media_gallery', 'multiselect' : true , 'types': Drupal.settings.mediaGalleryAllowedMediaTypes};
   Drupal.media.popups.mediaBrowser(Drupal.media_gallery.add_media, pluginOptions);
 };
@@ -25,7 +30,7 @@ Drupal.media_gallery.add_media = function (mediaFiles) {
     //console.warn('Error: Media not added.');
   };
 
-  var src = Drupal.settings.mediaGalleryAddImagesUrl;
+  var src = Drupal.settings.mediaGalleryAddImagesBaseUrl + Drupal.settings.mediaGalleryNodeNid + '/' + Drupal.settings.mediaGalleryToken;
 
   var media = [];
 
diff --git a/media_gallery.module b/media_gallery.module
index 0ec5541..d68f939 100644
--- a/media_gallery.module
+++ b/media_gallery.module
@@ -27,7 +27,6 @@ function media_gallery_file_view_modes() {
     'media_gallery_lightbox' => t('Gallery lightbox'),
     'media_gallery_detail' => t('Gallery detail'),
     'media_gallery_block_thumbnail' => t('Gallery block thumbnail'),
-    'media_gallery_collection_thumbnail' => t('Gallery collection thumbnail'),
   );
 }
 
@@ -314,11 +313,17 @@ function media_gallery_view($node, $view_mode) {
     $instance = field_info_instance('node', 'media_gallery_file', $node->type);
     $token = drupal_get_token('media_gallery');
     $gallery_js_settings = array(
-      'mediaGalleryAddImagesUrl' => url('media-gallery/add-images/' . $node->nid . '/' . $token),
-      'mediaGallerySortGalleryUrl' => url('media-gallery/sort/gallery/' . $node->nid . '/' . $token),
+      'mediaGalleryToken' => $token,
+      'mediaGalleryNodeNid' => '',
+      'mediaGalleryAddImagesBaseUrl' => url('media-gallery/add-images/'),
       'mediaGalleryAllowedMediaTypes' => array_filter($instance['widget']['settings']['allowed_types']),
     );
 
+    // only set the js sort URL if in view node page and that node is the one being rendered
+    if (arg(1) && arg(1) == $node->nid) {
+      $gallery_js_settings['mediaGallerySortGalleryUrl'] = url('media-gallery/sort/gallery/' . $node->nid . '/' . $token);
+    }
+
     // When viewing the full node, add front-end resources for drag-and-drop
     // sorting.
     if ($view_mode == 'full') {
