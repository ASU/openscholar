<div href="#" ng-show="site_data.length" ng-click="showSites = ! showSites" ng-class="{menu_modal_open: showSites}">My Sites</div>
<div class="account_tab_popout user_sites" ng-show="showSites">
 <div class="close-link user_sites-close" ng-click="showSites = ! showSites"></div>
	<div ng-repeat="(key, own) in [true,false]" ng-init="currentPage[key] = 0">
	<div ng-show="own && (site_data | filter:{owner: own}:strict).length" class="header-row">My Sites</div>
	<div ng-show="!own && (site_data | filter:{owner: own}:strict).length" class="header-row">Other Sites</div>
		<div ng-repeat="(key, site) in filtered = (site_data | filter:{owner: own}:strict) | limitTo: pageSize: pageSize * currentPage[key]" class="site-list">
			<table class="table-shading">
				<tr>
				<td class="site-name"><a href="/node/{{ site.id }}" class="text_link">{{ site.title }}</a></td>
				<td class="user-site-controls"><a ng-show="site.subsite_access" href="/site/register?parent={{ site.id }}" class="btton add">Add subsite</a>
				<a ng-show="site.delete_access" href="/{{ site.purl }}/node/{{ site.id }}/delete" class="btton remove">Delete</a>
				<a ng-show="! site.delete_access" href="/{{ site.purl }}/os/vsite/delete/{{ site.id }}" class="btton remove">Delete</a></td>
			</tr>
			</table>
		</div>
		<div ng-if='filtered.length > pageSize' class='pager'>
			<button ng-disabled="currentPage[key] == 0" ng-click="currentPage[key]=currentPage[key]-1">
				&lt;
			</button>
			{{currentPage[key]+1}}/{{numberOfPages(filtered)}}
			<button ng-disabled="currentPage[key] >= filtered.length/pageSize - 1" ng-click="currentPage[key]=currentPage[key]+1">
				&gt;
			</button>
		</div>
	</div>
</div>
